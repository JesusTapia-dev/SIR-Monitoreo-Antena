{% extends "dev_conf.html" %}
{% load static %}
{% load bootstrap3 %}
{% block extra-head %}
<style type="text/css">
    /* show the move cursor as the user moves the mouse over the panel header.*/
    .panel-default { cursor: move; }
</style>
{% endblock %}
{% block content %}
<table class="table table-bordered">
{% for key in dev_conf_keys %}
<tr><th>{{key|title}}</th><td>{{dev_conf|attr:key}}</td></tr>
{% endfor %}
</table>
<button class="btn btn-primary pull-right" style="margin-left: 10px" id="bt_send">Send</button>
<button class="btn btn-primary pull-right" style="margin-left: 10px" id="bt_export">Export</button>
<button class="btn btn-primary pull-right" style="margin-left: 10px" id="bt_edit">Edit</button>
<br>
<h2>RC Lines</h2><hr>

<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
{% for line in rc_lines %}
  <div class="panel panel-default" >
    <div class="panel-heading" role="tab" id="headingOne">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse{{line.id}}" aria-expanded="true" aria-controls="collapseOne">
          CH{{line.channel}} - {{line.get_name}}
        </a>
      <button class="btn-xs btn-danger pull-right" name="bt_remove_line" value="{{line.pk}}"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
      <button class="btn-xs btn-info pull-right" name="bt_line_down" value="{{line.pk}}"><span class="glyphicon glyphicon-arrow-down" aria-hidden="true"></span></button>
      <button class="btn-xs btn-info pull-right" name="bt_line_up" value="{{line.pk}}"><span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span></button>      
      </h4>      
    </div>
    <div id="collapse{{line.id}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <div class="panel-body">
        {% bootstrap_form line.form layout='horizontal' size='small' %}        
      </div>
    </div>
  </div>
{% endfor%}
</div>
<br>
<div class="pull-right">
<button class="btn btn-primary" id="bt_add_line">Add Line</button>
<button class="btn btn-primary" id="bt_add_line">  Edit  </button>
<button class="btn btn-primary" id="bt_pulses">Pulses</button>
</div>
{% endblock %}


{% block extra-js%}

<script type="text/javascript">
    $(document).ready(function() {
  $("#bt_edit").click(function() {
    document.location = "{% url 'url_edit_rc_conf' dev_conf.id%}";
  });
  
  $("#bt_add_line").click(function() {
    document.location = "{% url 'url_add_rc_line' dev_conf.id%}";
  });
  
  $("button[name=bt_remove_line]").click(function(){
    document.location = "line/"+$(this).val()+"/delete/";
  });  
  
  $("button[name=bt_line_up]").click(function(){
    document.location = "line/"+$(this).val()+"/up/";
  });  
  
  $("button[name=bt_line_down]").click(function(){
    document.location = "line/"+$(this).val()+"/down/";
  });  
  

  
    $(".panel-group").sortable();
  
  }); 
</script>
{% endblock %}