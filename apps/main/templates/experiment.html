{% extends "base.html" %}
{% load bootstrap3 %}
{% load static %}
{% load main_tags %}
{% block extra-head %}
<link href="{% static 'css/bootstrap-datetimepicker.min.css' %}" media="screen" rel="stylesheet">
{% endblock %}

{% block exp-active %}active{% endblock %}

{% block content-title %}{{title}}{% endblock %}
{% block content-suptitle %}{{suptitle}}{% endblock %}

{% block content %}

{% block menu-actions %}
<span class=" dropdown pull-right">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown"><span class="glyphicon glyphicon-menu-hamburger gi-2x" aria-hidden="true"></span></a>
  <ul class="dropdown-menu" role="menu">
    <li><a href="{% url 'url_edit_experiment' experiment.id %}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a></li>
    <li><a href="{% url 'url_delete_experiment' experiment.id %}"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Delete</a></li>
    <li><a href="{{ experiment.get_absolute_url_import }}"><span class="glyphicon glyphicon-import" aria-hidden="true"></span> Import </a></li>
    <li><a href="{{ experiment.get_absolute_url_export }}"><span class="glyphicon glyphicon-export" aria-hidden="true"></span> Export </a></li>    
    {% block extra-menu-actions %}
    {% endblock %}
    <li><a>----------------</a></li>
    <li><a href="{% url 'url_mix_experiment' experiment.id %}"><span class="glyphicon glyphicon-random" aria-hidden="true"></span> Mix RC Configurations </a></li>
    <li><a href="{% url 'url_add_dev_conf' experiment.id %}"><span class="glyphicon glyphicon-plus-sign" aria-hidden="true"></span> Add Configuration</a></li>

  </ul>          
</span>
{% endblock %}

<table class="table table-bordered">
{% for key in experiment_keys %}
<tr><th>{{key|title}}</th><td>{{experiment|attr:key}}</td></tr>
{% endfor %}
</table>
<br></br>
<br></br>

<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTwo">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseThree">
          Device Configurations
        </a>
      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingTwo">
      <div class="panel-body">
      <table class="table table-hover">
		<tr>
		  <th>#</th>
		  {% for key in configuration_keys %}
		  <th>{{ key|title }}</th>
		  {% endfor%}
		</tr>
		{% for item in configurations %}
		<tr class="clickable-row" data-href="{{item.get_absolute_url}}">
		  <td>{{ forloop.counter }}</td>
		  {% for key in configuration_keys %}
		  {% if key == 'device__status' %}
		    <td class="text-{{item.device.status_color}}">{{ item|value:key }}</td>
		  {% else %}  
		    <td>{{ item|value:key }}</td>
		  {% endif %}
		  {% endfor %}
		</tr>
		{% endfor %}
	  </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block sidebar%}
   {% include "sidebar_devices.html" %}
{% endblock %}

{% block extra-js%}
<script type="text/javascript">
  
  $(".clickable-row").click(function() {
    document.location = $(this).data("href");
  });
  
  $("#bt_edit").click(function() {
	    document.location = "{% url 'url_edit_experiment' experiment.id%}";
	  });
  
  $("#bt_add_conf").click(function() {
    document.location = "{% url 'url_add_dev_conf' experiment.id %}";
  });
  
</script>
{% endblock %}